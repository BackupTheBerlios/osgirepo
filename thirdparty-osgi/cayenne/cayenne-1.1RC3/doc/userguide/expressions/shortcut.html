<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">


<html>
<head>
        <title>Cayenne 1.1: User Guide - Using Expressions</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
        <meta name="keywords" content="Object Relational Mapping framework for Java database applications, Java Development, Cayenne, OO-to-Relational mapping, Object-Oriented Software, OpenSource Development, WebObjects, EOF, Enterprise Objects Framework">
        <meta name="description" content="Cayenne is an object-relational mapping Java framework. It is free and OpenSource, developed under apache license.">
        <link href="../../images/objectstyle.css" rel="stylesheet">
</head>

<body text="#000000" bgcolor="#ffffff" link="#000000" alink="#000000" vlink="#000000" 
      topmargin="0" leftmargin="0" marginwidth="0" marginheight="0">
<br>
<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
  <tbody><tr>
    <td width="12%" height="70" align="right" valign="top" background="../../images/778899.gif">
       <a href="http://objectstyle.org/" target="_new"><img border="0" src="../../images/os_logo.gif" width="160" height="32"></a>
    </td>
    <td width="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="65%" align="right" background="../../images/cccc99.gif">
       <a href="http://objectstyle.org/cayenne/" target="_new"><img border="0" src="../../images/cayenne_logo.gif" width="300" height="92"></a>
    </td>
    <td width="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="28%" background="../../images/666633.gif"> </td>
  </tr>
  <tr>
    <td width="12%" valign="top" bgcolor="#778899" height="450" ><table width="100%" border="0" cellspacing="10" cellpadding="0">
    <tbody>
      <tr>
        <td align="right" class="normal">
                <p>
    <strong class="body-white">LOCAL DOCS</strong><br>
               <a href="../../index.html" class="body-white-small">Start</a>
<br>
               <a href="../../userguide/index.html" class="body-white-small">User Guide</a>
<br>
               <a href="../../modelerguide/index.html" class="body-white-small">Modeler Guide</a>
<br>
               <a href="../../examples/index.html" class="body-white-small">Examples</a>
<br>
               <a href="../../api/cayenne/index.html" class="body-white-small">Javadoc API</a>
<br>
               <a href="../../license.html" class="body-white-small">License</a>
<br>
        </p>
        <p>
    <strong class="body-white">ONLINE RESOURCES</strong><br>
               <a href="http://objectstyle.org/cayenne/" class="body-white-small" target="_new">Home</a>
<br>
               <a href="http://objectstyle.org/cayenne/download.html" class="body-white-small" target="_new">Download</a>
<br>
               <a href="http://objectstyle.org/cayenne/bugs-features.html" class="body-white-small" target="_new">Bugs and Features</a>
<br>
               <a href="http://objectstyle.org/cayenne/cayenne-commercial-support.html" class="body-white-small" target="_new">Commercial Support</a>
<br>
        </p>
            </td>
      </tr>
    </tbody>
    </table></td>
    <td width="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="65%" valign="top" bgcolor="#cccc99" class="body-black">
    
                          <table width="100%" border="0" cellspacing="10" cellpadding="0">
      <tbody><tr>
        <td align="left" valign="top" class="body-black"><strong><font class="normal-red">10. Using Expressions</font>
            <img src="../../images/redline.gif" width="100%" height="1"><br></strong><br>
                                                      
    <strong><br>
    10.3 Expression Factory Utilities<br>
    </strong><br>
                                    <p>Sometimes there is a need to build an expression by combining other existing expressions. Also
		quiet often it is desirable to use strongly typed API instead of interpreted string expressions.
		The following sections describe ExpressionFactory and Expression methods that allow to construct
		expressions step by step via API calls.
		</p>
                                                        
    <strong><br>
    10.3.1 Path/Value Expressions<br>
    </strong><br>
                                    <p>The most simple expressions are the ones that match an object property
		path with a value or a list of values. ExpressionFactory provides a set of methods to build 
		such "path/value" expressions:</p>
                                                <ul>
        	<li>public static Expression <b>matchExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>noMatchExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>matchDbExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>lessExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>lessOrEqualExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>greaterExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>greaterOrEqualExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>inExp</b>(String pathSpec, Object[] values)<br />
            <p />
            </li>
            
            <li>public static Expression <b>inExp</b>(String pathSpec, java.util.List values)<br />
            <p />
            </li>
            
            <li>public static Expression <b>betweenExp</b>(String pathSpec, Object value1, Object value2)<br />
            <p />
            </li>
            
            <li>public static Expression <b>likeExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>likeIgnoreCaseExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>notInExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>notBetweenExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>notLikeExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
            
            <li>public static Expression <b>notLikeIgnoreCaseExp</b>(String pathSpec, Object value)<br />
            <p />
            </li>
        </ul>
                                                                            
    <strong><br>
    10.3.2 Chanining Expressions<br>
    </strong><br>
                                    <p>Expression class itself provides a set of convenience methods to chain expressions
		as they are built from smaller parts. Note that each of these methods does not modify
		the original expression, rather it builds and returns a new instance of the expression.</p>
                                                <ul>
            <li>public Expression <b>joinExp</b>(int type, Expression exp)<br />
            		Creates and returns a new expression that joins this object with another 
            		expression, using specified join type. This is a shorter equivalent of
            		<code>ExpressionFactory.binaryExpression(type, this, exp)</code>.
            		<p />
            		</li>
            		
            		<li>public Expression <b>andExp</b>(Expression exp)<br />
            		A shorter equivalent for <code>joinExp(Expression.AND, exp)</code>.
            		<p />
            		</li>
            		
            		<li>public Expression <b>orExp</b>(Expression exp)<br />
            		A shorter equivalent for <code>joinExp(Expression.OR, exp)</code>.
            		<p />
            		</li>
            	</ul>
                                                <p>Example of using chaining:</p>
                                                <table width="100%" border="0" cellpadding="0" cellspacing="7" bgcolor="#FFFFCC"  class="source">
  <tr>
    <td class="body-black"><pre>import org.objectstyle.cayenne.exp.Expression;
import org.objectstyle.cayenne.exp.ExpressionFactory;
import org.objectstyle.cayenne.query.SelectQuery;
...

// find artists whose name starts with "D"
// with invalid or null date of birth

Expression qual = ExpressionFactory.greaterOrEqualExp("dateOfBirth", new Date());
   
// 1. chain expressions, note the assignment back to "qual", 
// since a new instance is created
qual = qual.orExp(ExpressionFactory.matchExp("dateOfBirth", null));

// 2. "AND" applies to a combined earlier criteria
qual = 
   qual.andExp(ExpressionFactory.likeIgnoreCaseExp("artistName", "D%"));
    
SelectQuery select = new SelectQuery(Artist.class, qual);
</pre></td>
  </tr>
</table>   
                                                                            
    <strong><br>
    10.3.3 Creating Complex Expressions<br>
    </strong><br>
                                    <p>There is a way to create complex expressions either from the 
			Lists of expressions or from the Maps containing values using "path" Strings
			as keys. This approach significantly simplifies connecting Cayenne queries
			to the UI, and reduces the number of steps needed to create expressions
			in other cases. ExpressionFactory provides the following methods:
			</p>
                                                <ul>
			 	<li>public static Expression <b>joinExp</b>(int type, java.util.List expressions)<br />
			 	Joins all expressions into a single expression. type is used as an expression type 
			 	for expressions joining each one of the items on the list. 
			 	type is normally AND or OR.
            	<p />
            	</li>
            	
                <li>public static Expression <b>matchAllExp</b>(java.util.Map map, int type)<br />
			 	Creates an expression that matches all path/value pairs in map. Path is OBJ_PATH.
            	<p />
            	</li>
            	
            	<li>public static Expression <b>matchAllDbExp</b>(java.util.Map map, int type)<br />
			 	Same as above, but path is interpreted to be DB_PATH.
            	<p />
            	</li>
            	
            	<li>public static Expression <b>matchAnyExp</b>(java.util.Map map, int type)<br />
			 	Creates an expression that matches any of the path/value pairs in map. Path is OBJ_PATH.
            	<p />
            	</li>
            	
            	<li>public static Expression <b>matchAnyDbExp</b>(java.util.Map map, int type)<br />
			 	Same as above, but path is interpreted to be DB_PATH.
            	<p />
            	</li>
			</ul>
                                                                    </td>
      </tr>
    </tbody>
    </table>
        </td>
    <td width="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    
            <td width="30%" valign="top" bgcolor="#999966"><table width="100%" border="0" cellspacing="10" cellpadding="0">
      <tbody>
       	<tr>
       		<td align="left" class="normal">
       		       		<strong class="body-white">    <a href="../../userguide/index.html" class="body-white-small">User Guide  - version 1.1</a>
</strong><br>
       		<p><strong class="body-white">TABLE OF CONTENTS:</strong></p>

             		<p>
       		    <a href="../../userguide/introduction/index.html" class="body-white-small">1. Introduction</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/install/index.html" class="body-white-small">2. Installation</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/quickstart/index.html" class="body-white-small">3. Quick Start</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/design/index.html" class="body-white-small">4. Design</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/javagen.html" class="body-white-small">5. Generating Classes with Ant</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/datactxt/index.html" class="body-white-small">6. Using DataContext</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/fetch/index.html" class="body-white-small">7. Using Queries</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/dataobjects/index.html" class="body-white-small">8. Working with DataObjects</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/stored-procedures/index.html" class="body-white-small">9. Using Stored Procedures</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/expressions/index.html" class="body-white-small">10. Using Expressions</a>
<br>
       		
       		       		       		   &nbsp;    <a href="../../userguide/expressions/path.html" class="body-white-small">10.1 Path Expressions</a>
<br>
       		   
       		          		       		   &nbsp;    <a href="../../userguide/expressions/common.html" class="body-white-small">10.2 Building Expressions</a>
<br>
       		   
       		          		       		   &nbsp;    <a href="../../userguide/expressions/shortcut.html" class="body-white-small">10.3 Expression Factory Utilities</a>
<br>
       		   
       		          		       		   &nbsp;    <a href="../../userguide/expressions/nulls.html" class="body-white-small">10.4 NULL Handling</a>
<br>
       		   
       		          		       		   &nbsp;    <a href="../../userguide/expressions/in-memory.html" class="body-white-small">10.5 In-Memory Evaluation</a>
<br>
       		   
       		          		       		</p>
    	     		<p>
       		    <a href="../../userguide/perform/index.html" class="body-white-small">11. Performance Tuning</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/deploy/index.html" class="body-white-small">12. Deployment</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/dataview/index.html" class="body-white-small">13. DataViews</a>
<br>
       		
       		</p>
    	     		<p>
       		    <a href="../../userguide/misc.html" class="body-white-small">14. Miscellaneous Information</a>
<br>
       		
       		</p>
    	     	 </td>
    	 </tr>
      </tbody>
    </table>
    </td>    
      </tr>  <tr>

    <td width="12%" height="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="1" height="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="65%" height="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="1" height="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="28%" height="1" bgcolor="#333333"><img border="0" src="../../images/spacer.gif" width="1" height="1"></td>
  </tr>
  <tr>
    <td width="12%"></td>
    <td width="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="65%" valign="top"><table width="100%" border="0" cellspacing="10" cellpadding="0" class="body-black">
      <tbody><tr>
        <td>Copyright &copy;2001-2004 ObjectStyle Group</td>
      </tr>
    </tbody></table></td>
    <td width="1" bgcolor="#333333"><img src="../../images/spacer.gif" width="1" height="1"></td>
    <td width="28%"> </td>
  </tr>
</tbody></table>
<br>
</body>
</html>













    


